{"ast":null,"code":"var _s = $RefreshSig$();\nimport Cookies from 'js-cookie';\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { api } from '../config/axiosConfig';\nimport { withRouter } from './with-router';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthVerify = props => {\n  _s();\n  let location = useLocation();\n  let navigate = useNavigate();\n  const [isLoading, setIsLoading] = useState(false);\n  useEffect(() => {\n    let user = localStorage.user;\n    if (user) {\n      api.get(\"/api-firstAccess\").then(res => {\n        console.log(\"trc res\");\n        if (res.data.user) {\n          let userLS = {\n            id: res.data.user.id,\n            name: res.data.user.name,\n            email: res.data.user.email,\n            password: res.data.user.password,\n            address: res.data.user.address,\n            phone: res.data.user.phone\n          };\n          localStorage.setItem('user', JSON.stringify(userLS));\n          setIsLoading(false);\n          console.log(\"Đăng nhập thành công!\");\n        } else {\n          setIsLoading(false);\n          navigate(\"/\");\n          console.log(\"Phiên đăng nhập hết hạn!\");\n        }\n      }).catch(err => {\n        setIsLoading(false);\n        console.log(\"err\" + err);\n      });\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n};\n_s(AuthVerify, \"GCe91vcB7yZYjFpHEi2c27v8dkg=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = AuthVerify;\nexport default AuthVerify;\nvar _c;\n$RefreshReg$(_c, \"AuthVerify\");","map":{"version":3,"names":["Cookies","React","useEffect","useState","useNavigate","useLocation","api","withRouter","AuthVerify","props","location","navigate","isLoading","setIsLoading","user","localStorage","get","then","res","console","log","data","userLS","id","name","email","password","address","phone","setItem","JSON","stringify","catch","err"],"sources":["/home/thom/Workspace/Mioto/BT2_3/profile-management-webapp/src/common/auth-verify.jsx"],"sourcesContent":["import Cookies from 'js-cookie';\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { api } from '../config/axiosConfig';\nimport { withRouter } from './with-router';\n\nconst AuthVerify = (props) => {\n  let location = useLocation();\n  let navigate = useNavigate();\n\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    let user = localStorage.user;\n    if(user){\n      api.get(\"/api-firstAccess\")\n      .then(res => {\n        console.log(\"trc res\");\n        if(res.data.user){\n          let userLS = {\n            id: res.data.user.id,\n            name: res.data.user.name,\n            email: res.data.user.email,\n            password: res.data.user.password,\n            address: res.data.user.address,\n            phone: res.data.user.phone\n          }\n\n          localStorage.setItem('user', JSON.stringify(userLS));\n          setIsLoading(false);\n          console.log(\"Đăng nhập thành công!\");\n          \n        }else{\n          setIsLoading(false);\n          navigate(\"/\");\n          console.log(\"Phiên đăng nhập hết hạn!\");\n        }\n      })\n      .catch(err => {\n        setIsLoading(false);\n        console.log(\"err\" + err)\n      });\n    }\n\n  })\n  return (\n    <></>\n  )\n}\n\nexport default AuthVerify;\n"],"mappings":";AAAA,OAAOA,OAAO,MAAM,WAAW;AAC/B,OAAOC,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AAC3D,SAASC,GAAG,QAAQ,uBAAuB;AAC3C,SAASC,UAAU,QAAQ,eAAe;AAAC;AAAA;AAE3C,MAAMC,UAAU,GAAIC,KAAK,IAAK;EAAA;EAC5B,IAAIC,QAAQ,GAAGL,WAAW,EAAE;EAC5B,IAAIM,QAAQ,GAAGP,WAAW,EAAE;EAE5B,MAAM,CAACQ,SAAS,EAAEC,YAAY,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC;EAEjDD,SAAS,CAAC,MAAM;IACd,IAAIY,IAAI,GAAGC,YAAY,CAACD,IAAI;IAC5B,IAAGA,IAAI,EAAC;MACNR,GAAG,CAACU,GAAG,CAAC,kBAAkB,CAAC,CAC1BC,IAAI,CAACC,GAAG,IAAI;QACXC,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;QACtB,IAAGF,GAAG,CAACG,IAAI,CAACP,IAAI,EAAC;UACf,IAAIQ,MAAM,GAAG;YACXC,EAAE,EAAEL,GAAG,CAACG,IAAI,CAACP,IAAI,CAACS,EAAE;YACpBC,IAAI,EAAEN,GAAG,CAACG,IAAI,CAACP,IAAI,CAACU,IAAI;YACxBC,KAAK,EAAEP,GAAG,CAACG,IAAI,CAACP,IAAI,CAACW,KAAK;YAC1BC,QAAQ,EAAER,GAAG,CAACG,IAAI,CAACP,IAAI,CAACY,QAAQ;YAChCC,OAAO,EAAET,GAAG,CAACG,IAAI,CAACP,IAAI,CAACa,OAAO;YAC9BC,KAAK,EAAEV,GAAG,CAACG,IAAI,CAACP,IAAI,CAACc;UACvB,CAAC;UAEDb,YAAY,CAACc,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACT,MAAM,CAAC,CAAC;UACpDT,YAAY,CAAC,KAAK,CAAC;UACnBM,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC;QAEtC,CAAC,MAAI;UACHP,YAAY,CAAC,KAAK,CAAC;UACnBF,QAAQ,CAAC,GAAG,CAAC;UACbQ,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;QACzC;MACF,CAAC,CAAC,CACDY,KAAK,CAACC,GAAG,IAAI;QACZpB,YAAY,CAAC,KAAK,CAAC;QACnBM,OAAO,CAACC,GAAG,CAAC,KAAK,GAAGa,GAAG,CAAC;MAC1B,CAAC,CAAC;IACJ;EAEF,CAAC,CAAC;EACF,oBACE,qCAAK;AAET,CAAC;AAAA,GA1CKzB,UAAU;EAAA,QACCH,WAAW,EACXD,WAAW;AAAA;AAAA,KAFtBI,UAAU;AA4ChB,eAAeA,UAAU;AAAC;AAAA"},"metadata":{},"sourceType":"module"}