{"ast":null,"code":"var _s = $RefreshSig$();\nimport Cookies from 'js-cookie';\nimport React, { useEffect, useState } from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { api } from '../config/axiosConfig';\nimport { withRouter } from './with-router';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthVerify = props => {\n  _s();\n  let location = props.router.location;\n  let navigate = Navigate();\n  const [isLoading, setIsLoading] = useState(false);\n  useEffect(() => {\n    api.get(\"/\").then(res => {\n      if (res.data.user) {\n        let userLS = {\n          id: res.data.user.id,\n          name: res.data.user.name,\n          email: res.data.user.email,\n          password: res.data.user.password,\n          address: res.data.user.address,\n          phone: res.data.user.phone\n        };\n        localStorage.setItem('user', JSON.stringify(userLS));\n        setIsLoading(false);\n        console.log(\"Đăng nhập thành công!\");\n      } else {\n        setIsLoading(false);\n        navigate(`/`);\n        console.log(\"Phiên đăng nhập hết hạn!\");\n      }\n    }).catch(err => {\n      setIsLoading(false);\n      console.log(\"err\" + err);\n    });\n  }, [location]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n};\n_s(AuthVerify, \"DlrQjwOD5XS1kcZJvMHoaf7KaZ8=\");\n_c = AuthVerify;\nexport default _c2 = withRouter(AuthVerify);\nvar _c, _c2;\n$RefreshReg$(_c, \"AuthVerify\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["Cookies","React","useEffect","useState","Navigate","api","withRouter","AuthVerify","props","location","router","navigate","isLoading","setIsLoading","get","then","res","data","user","userLS","id","name","email","password","address","phone","localStorage","setItem","JSON","stringify","console","log","catch","err"],"sources":["/home/thom/Workspace/Mioto/BT2_3/profile-management-webapp/src/common/auth-verify.jsx"],"sourcesContent":["import Cookies from 'js-cookie';\nimport React, { useEffect, useState } from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { api } from '../config/axiosConfig';\nimport { withRouter } from './with-router';\n\nconst AuthVerify = (props) => {\n  let location = props.router.location;\n  let navigate = Navigate();\n\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    api.get(\"/\")\n      .then(res => {\n        if(res.data.user){\n          let userLS = {\n            id: res.data.user.id,\n            name: res.data.user.name,\n            email: res.data.user.email,\n            password: res.data.user.password,\n            address: res.data.user.address,\n            phone: res.data.user.phone\n          }\n\n          localStorage.setItem('user', JSON.stringify(userLS));\n          setIsLoading(false);\n          console.log(\"Đăng nhập thành công!\");\n        }else{\n          setIsLoading(false);\n          navigate(`/`);\n          console.log(\"Phiên đăng nhập hết hạn!\");\n        }\n      })\n      .catch(err => {\n        setIsLoading(false);\n        console.log(\"err\" + err)\n      });\n\n  }, [location])\n  return (\n    <></>\n  )\n}\n\nexport default withRouter(AuthVerify);\n"],"mappings":";AAAA,OAAOA,OAAO,MAAM,WAAW;AAC/B,OAAOC,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,GAAG,QAAQ,uBAAuB;AAC3C,SAASC,UAAU,QAAQ,eAAe;AAAC;AAAA;AAE3C,MAAMC,UAAU,GAAIC,KAAK,IAAK;EAAA;EAC5B,IAAIC,QAAQ,GAAGD,KAAK,CAACE,MAAM,CAACD,QAAQ;EACpC,IAAIE,QAAQ,GAAGP,QAAQ,EAAE;EAEzB,MAAM,CAACQ,SAAS,EAAEC,YAAY,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC;EAEjDD,SAAS,CAAC,MAAM;IACdG,GAAG,CAACS,GAAG,CAAC,GAAG,CAAC,CACTC,IAAI,CAACC,GAAG,IAAI;MACX,IAAGA,GAAG,CAACC,IAAI,CAACC,IAAI,EAAC;QACf,IAAIC,MAAM,GAAG;UACXC,EAAE,EAAEJ,GAAG,CAACC,IAAI,CAACC,IAAI,CAACE,EAAE;UACpBC,IAAI,EAAEL,GAAG,CAACC,IAAI,CAACC,IAAI,CAACG,IAAI;UACxBC,KAAK,EAAEN,GAAG,CAACC,IAAI,CAACC,IAAI,CAACI,KAAK;UAC1BC,QAAQ,EAAEP,GAAG,CAACC,IAAI,CAACC,IAAI,CAACK,QAAQ;UAChCC,OAAO,EAAER,GAAG,CAACC,IAAI,CAACC,IAAI,CAACM,OAAO;UAC9BC,KAAK,EAAET,GAAG,CAACC,IAAI,CAACC,IAAI,CAACO;QACvB,CAAC;QAEDC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACV,MAAM,CAAC,CAAC;QACpDN,YAAY,CAAC,KAAK,CAAC;QACnBiB,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC;MACtC,CAAC,MAAI;QACHlB,YAAY,CAAC,KAAK,CAAC;QACnBF,QAAQ,CAAE,GAAE,CAAC;QACbmB,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;MACzC;IACF,CAAC,CAAC,CACDC,KAAK,CAACC,GAAG,IAAI;MACZpB,YAAY,CAAC,KAAK,CAAC;MACnBiB,OAAO,CAACC,GAAG,CAAC,KAAK,GAAGE,GAAG,CAAC;IAC1B,CAAC,CAAC;EAEN,CAAC,EAAE,CAACxB,QAAQ,CAAC,CAAC;EACd,oBACE,qCAAK;AAET,CAAC;AAAA,GArCKF,UAAU;AAAA,KAAVA,UAAU;AAuChB,qBAAeD,UAAU,CAACC,UAAU,CAAC;AAAC;AAAA;AAAA"},"metadata":{},"sourceType":"module"}